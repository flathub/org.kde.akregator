{
    "id": "org.kde.akregator",
    "runtime": "org.kde.Platform",
    "runtime-version": "5.15-21.08",
    "sdk": "org.kde.Sdk",
    "base": "io.qt.qtwebengine.BaseApp",
    "base-version": "5.15-21.08",
    "command": "akregator",
    "rename-icon": "akregator",
    "finish-args": [
        "--socket=fallback-x11",
        "--socket=wayland",
        "--share=network",
        "--share=ipc",
        "--device=dri",
        "--own-name=org.freedesktop.Akonadi",
        "--own-name=org.freedesktop.Akonadi.*",
        "--own-name=org.kde.kaddressbook",
        "--own-name=org.kde.accountwizard",
        "--own-name=org.kde.akregator",
        "--own-name=org.kde.pimsettingsexporter",
        "--own-name=org.kde.pim.*",
        "--talk-name=org.kde.Solid.PowerManagement",
        "--talk-name=org.kde.kded5",
        "--talk-name=org.kde.kglobalaccel",
        "--talk-name=org.kde.JobViewServer",
        "--talk-name=org.kde.klauncher5",
        "--talk-name=org.kde.knotify",
        "--talk-name=org.kde.kwalletd5",
        "--talk-name=org.kde.kcookiejar5",
        "--system-talk-name=org.freedesktop.NetworkManager"
    ],

    "cleanup-commands": [
        "# Cleanup after QtWebEngine",
        "rm -rf /app/include",
        "rm -rf /app/lib/{cmake,mkspecs,pkgconfig} /app/lib/*/*.la"
    ],

    "modules": [
        {
            "name": "boost",
            "buildsystem": "simple",
            "build-commands": [
                "./bootstrap.sh --prefix=/app --with-libraries=system",
                "./b2 -j $FLATPAK_BUILDER_N_JOBS install"
            ],
            "cleanup": [
                "*.a"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://boostorg.jfrog.io/artifactory/main/release/1.78.0/source/boost_1_78_0.tar.bz2",
                    "sha256": "8681f175d4bdb26c52222665793eef08490d7758529330f98d3b29dd0735bccc"
                }
            ]
        },
        {
            "name": "gpgme",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gnupg.org/ftp/gcrypt/gpgme/gpgme-1.17.0.tar.bz2",
                    "sha256": "4ed3f50ceb7be2fce2c291414256b20c9ebf4c03fddb922c88cda99c119a69f5"
                }
            ],
            "cleanup": [
                "*.la"
            ]
        },
        {
            "name": "libsecret",
            "buildsystem": "meson",
            "config-opts": [
                "-Dmanpage=false",
                "-Dvapi=false",
                "-Dgtk_doc=false",
                "-Dintrospection=false"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gitlab.gnome.org/GNOME/libsecret/-/archive/0.20.5/libsecret-0.20.5.tar.gz",
                    "sha256": "b33b9542222ea8866f6ff2d31c0ad373877c2277db546ca00cc7fdda9cbab1c3"
                }
            ]
        },
        {
            "name": "qtkeychain",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_INSTALL_LIBDIR=/app/lib",
                "-DLIB_INSTALL_DIR=/app/lib",
                "-DBUILD_TRANSLATIONS=NO"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/frankosterfeld/qtkeychain/archive/v0.13.2.tar.gz",
                    "sha256": "20beeb32de7c4eb0af9039b21e18370faf847ac8697ab3045906076afbc4caa5"
                }
            ]
        },
        {
            "name": "akonadi",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DBUILD_TOOLS=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
                "-DDATABASE_BACKEND=SQLITE"
            ],
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/akonadi-21.12.3.tar.xz",
                    "sha256": "4fe8ded706faf6ce87a48b7f164cbdd4eb71a342501eb9a0db40a87666cfda08"
                }
            ],
            "modules": [
                {
                    "name": "sqlite3",
                    "config-opts": [
                        "--enable-threadsafe",
                        "--enable-threads-override-locks"
                    ],
                    "build-options": {
                        "cflags": "-DSQLITE_ENABLE_UNLOCK_NOTIFY=1"
                    },
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://sqlite.org/2016/sqlite-autoconf-3150200.tar.gz",
                            "sha256": "07b35063b9386865b78226cdaca9a299d938a87aaa8fdc4d73edb0cef30f3149"
                        }
                    ],
                    "cleanup": [
                        "/bin/sqlite3",
                        "*.a"
                    ]
                }
            ]
        },
        {
            "name": "kmime",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/kmime-21.12.3.tar.xz",
                    "sha256": "fc5a1b86a18c0b0ef67759e3813cb49b3286b101f8494ce0497737ee29a1470f"
                }
            ]
        },
        {
            "name": "akonadi-mime",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/akonadi-mime-21.12.3.tar.xz",
                    "sha256": "bbcf7ef38a113765176b5325c7c458562084bfd1a56e6680b8e584f48b5b99ad"
                }
            ]
        },
        {
            "name": "grantlee",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/steveire/grantlee/archive/refs/tags/v5.2.0.tar.gz",
                    "sha256": "139acee5746b957bdf1327ec0d97c604d4c0b9be42aec5d584297cb5ed6a990a"
                }
            ]
        },
        {
            "name": "grantleetheme",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/grantleetheme-21.12.3.tar.xz",
                    "sha256": "67d9d531e4f326ea4efd40a955c9d2c6e8e54b9a02678dcee4c10b3917d503f1"
                }
            ]
        },
        {
            "name": "kpimtextedit",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/kpimtextedit-21.12.3.tar.xz",
                    "sha256": "54f3e7bea55e051240a7b328553eb43131e6c0ce33bf67eb0e28decae4c219a6"
                }
            ]
        },
        {
            "name": "libkleo",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/libkleo-21.12.3.tar.xz",
                    "sha256": "f47c65970564a0aeeabaa90714023d9f1f9737297900b68fbf5a81d8281201a7"
                }
            ]
        },
        {
            "name": "akonadi-contacts",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/akonadi-contacts-21.12.3.tar.xz",
                    "sha256": "b5a50748877cac1209bbbfbb19cbd20441c0563924aceceaba081fa113903d12"
                }
            ]
        },
        {
            "name": "kontactinterface",
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/kontactinterface-21.12.3.tar.xz",
                    "sha256": "e8b0408b7e634e9802ae81caaba3e154a5474a5bfc0c1981386dccb508069de3"
                }
            ]
        },
        {
            "name": "libkdepim",
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/libkdepim-21.12.3.tar.xz",
                    "sha256": "9c579e68c7686862988b9baf43a34e5952b2d00033b01e80c53e3959bee9323d"
                }
            ]
        },
        {
            "name": "kidentitymanagement",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/kidentitymanagement-21.12.3.tar.xz",
                    "sha256": "64e698618d4384fa98512d208776eb94abc2aa514356f162950546882bddbca3"
                }
            ]
        },
        {
            "name": "kimap",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/kimap-21.12.3.tar.xz",
                    "sha256": "fd96fa20b465ea442df960b57f5c27640e452b92d099a1f11bd051b7e74f4d86"
                }
            ]
        },
        {
            "name": "kldap",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/kldap-21.12.3.tar.xz",
                    "sha256": "0abce0ebca12a6ee71e6b93a727579d20900fdbc750f059283dbd1d4a1d3948e"
                }
            ],
            "modules": [
                {
                    "name": "openldap",
                    "config-opts": [
                        "--disable-static",
                        "--disable-slapd"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://www.openldap.org/software/download/OpenLDAP/openldap-release/openldap-2.6.1.tgz",
                            "sha256": "9d576ea6962d7db8a2e2808574e8c257c15aef55f403a1fb5a0faf35de70e6f3"
                        }
                    ],
                    "cleanup": [
                        "/bin/ldap*",
                        "/sbin",
                        "/share/man",
                        "*.la"
                    ]
                }
            ]
        },
        {
            "name": "xapian",
            "sources": [
                {
                    "type": "archive",
                    "url": " https://oligarchy.co.uk/xapian/1.4.18/xapian-core-1.4.18.tar.xz",
                    "sha256": "196ddbb4ad10450100f0991a599e4ed944cbad92e4a6fe813be6dce160244b77"
                }
            ],
            "config-opts": [
                "--disable-documentation"
            ],
            "cleanup": [
                "/share/doc/xapian-core",
                "/bin/xapian-*",
                "/bin/copydatabase",
                "/bin/quest",
                "/bin/simpleexpand",
                "/bin/simpleindex",
                "/bin/simplesearch",
                "*.la"
            ]
        },
        {
            "name": "akonadi-search",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
                "-DAKONADISEARCH_ENABLE_KRUNNER_RUNNER=OFF"
            ],
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/akonadi-search-21.12.3.tar.xz",
                    "sha256": "d76c0edccf2e25b9e86469d21a32015315e77cb05f489fc3bffb27d6e5ffa6c5"
                }
            ]
        },
        {
            "name": "pimcommon",
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/pimcommon-21.12.3.tar.xz",
                    "sha256": "27148d059cb6d55d523ec594e66c6a5ef4d475d75ad8eff9a3e7884c01082dcc"
                }
            ]
        },
        {
            "name": "libgravatar",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/libgravatar-21.12.3.tar.xz",
                    "sha256": "076ed85282b04eee4960072bf5ffaca514bb24f61510af9a3a8c3fe5daf030ae"
                }
            ]
        },
        {
            "name": "ksmtp",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/ksmtp-21.12.3.tar.xz",
                    "sha256": "22da5a72c957d8a38d7b5792013edaa826da8d41eeba30db66ece9f0f42bbe4d"
                }
            ]
        },
        {
            "name": "libkgapi",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/libkgapi-21.12.3.tar.xz",
                    "sha256": "5d06d1c4712991cfb7c51ff0f36d22a1d9078e38a9ea4552cd31cc6ad04173ed"
                }
            ]
        },
        {
            "name": "kmailtransport",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/kmailtransport-21.12.3.tar.xz",
                    "sha256": "26ba38d87c0072f448d63966cab31914903c7dfa73817846d2d1a8808e7e7750"
                }
            ]
        },
        {
            "name": "kmbox",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/kmbox-21.12.3.tar.xz",
                    "sha256": "19731646fccea7f1615e7b0a6d2a1682e6afdf444ff74a6d40f6a821e1149411"
                }
            ]
        },
        {
            "name": "messagelib",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/messagelib-21.12.3.tar.xz",
                    "sha256": "5c57b5d7fcabaf8030f609e1458bc8d0ad436901a5ef45cff83a470cd5b43077"
                }
            ],
            "modules": [
                {
                    "name": "qca",
                    "config-opts": [
                        "-DENABLE_TESTING=OFF"
                    ],
                    "buildsystem": "cmake-ninja",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://download.kde.org/stable/qca/2.3.4/qca-2.3.4.tar.xz",
                            "sha256": "6b695881a7e3fd95f73aaee6eaeab96f6ad17e515e9c2b3d4b3272d7862ff5c4"
                        }
                    ]
                }
            ]
        },
        {
            "name": "kuserfeedback",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/kuserfeedback/kuserfeedback-1.0.0.tar.xz",
                    "sha256": "5a2f53ebb4b99a280757ca32bd9b686a7764a726e7e4d8bafee33acbb44b9db7"
                }
            ]
        },
        {
            "name": "akregator",
            "buildsystem": "cmake-ninja",
            "post-install": [
                "mv ${FLATPAK_DEST}/share/mime/packages/akonadi-mime.xml ${FLATPAK_DEST}/share/mime/packages/${FLATPAK_ID}.xml"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.3/src/akregator-21.12.3.tar.xz",
                    "sha256": "c8a1fa0682123189b3c31c52c3f73d72c4f8a6dcaddad91a2391defe9360c5fb"
                },
                {
                    "type": "patch",
                    "path": "appdata.patch"
                }
            ]
        }
    ]
}
